<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Scroll Vertical Animado</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      overflow-x: hidden;
    }
    
    #animated-container {
      position: relative;
      width: 100%;
    }
    
    .section-pin {
      height: 100vh;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      position: sticky;
      top: 0;
    }
  </style>
</head>
<body class="bg-gray-900">
  
  <!-- Container das Sections Animadas -->
  <div id="animated-container">
    
    <!-- Section 1 - Azul -->
    <section class="section-pin bg-blue-600">
      <div class="text-center text-white">
        <h2 class="text-6xl font-bold mb-4">Section 1</h2>
        <p class="text-2xl">Role para baixo</p>
      </div>
    </section>
    
    <!-- Section 2 - Verde -->
    <section class="section-pin bg-green-600">
      <div class="text-center text-white">
        <h2 class="text-6xl font-bold mb-4">Section 2</h2>
        <p class="text-2xl">Continue rolando</p>
      </div>
    </section>
    
    <!-- Section 3 - Roxo -->
    <section class="section-pin bg-purple-600">
      <div class="text-center text-white">
        <h2 class="text-6xl font-bold mb-4">Section 3</h2>
        <p class="text-2xl">Última section animada</p>
      </div>
    </section>
    
  </div>
  
  <!-- Sections Normais (Sem Animação) -->
  <section class="h-screen w-full flex items-center justify-center bg-red-500">
    <div class="text-center text-white">
      <h2 class="text-5xl font-bold mb-4">Section Normal 1</h2>
      <p class="text-xl">Conteúdo sem animação</p>
    </div>
  </section>
  
  <section class="h-screen w-full flex items-center justify-center bg-yellow-500">
    <div class="text-center text-white">
      <h2 class="text-5xl font-bold mb-4">Section Normal 2</h2>
      <p class="text-xl">A animação terminou aqui</p>
    </div>
  </section>
  
  <section class="h-screen w-full flex items-center justify-center bg-pink-500">
    <div class="text-center text-white">
      <h2 class="text-5xl font-bold mb-4">Section Normal 3</h2>
      <p class="text-xl">Scroll normal</p>
    </div>
  </section>

  <script>
    // Registrar o plugin ScrollTrigger
    gsap.registerPlugin(ScrollTrigger);

    // Aguardar o carregamento completo
    window.addEventListener('load', () => {
      
      const container = document.getElementById('animated-container');
      const sections = document.querySelectorAll('.section-pin');
      
      // Cada section precisa de espaço para animar
      // Definir altura do container: (número de sections - 1) * 100vh + 100vh
      // Para 3 sections: 2 * 100vh (animação) + 100vh (última section) = 300vh
      const containerHeight = (sections.length - 1) * 100 + 100;
      container.style.height = `${containerHeight}vh`;
      
      // Configurar cada section
      sections.forEach((section, index) => {
        // Todas as sections são sticky no topo
        section.style.position = 'sticky';
        section.style.top = '0';
        
        // Z-index crescente para cada section seguinte ficar por cima
        section.style.zIndex = index + 1;
        
        // Não animar a primeira section
        if (index === 0) return;
        
        // Para sections 2 e 3: começam escondidas abaixo
        gsap.set(section, {
          yPercent: 100
        });
        
        // Criar animação individual para cada section
        gsap.to(section, {
          yPercent: 0,
          ease: 'none',
          scrollTrigger: {
            trigger: container,
            start: `top+=${(index - 1) * 100}vh top`,
            end: `top+=${index * 100}vh top`,
            scrub: 1,
            markers: false, // Mude para true para debug
            id: `section-${index + 1}`
          }
        });
      });
      
      // Refresh para garantir cálculos corretos
      ScrollTrigger.refresh();
      
    });
    
    // Refresh no resize
    window.addEventListener('resize', () => {
      ScrollTrigger.refresh();
    });
  </script>

</body>
</html>
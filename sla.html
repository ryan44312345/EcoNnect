<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>GSAP ScrollTrigger + ScrollSmoother + translate3d</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollSmoother.min.js"></script>
</head>

<body class="bg-gray-900 text-white overflow-hidden">

  <!-- üîπ ScrollSmoother wrapper -->
  <div id="smooth-wrapper">
    <div id="smooth-content">
      
      <!-- Se√ß√£o inicial -->
      <section class="h-screen flex items-center justify-center text-4xl font-bold bg-gradient-to-b from-gray-800 to-gray-900">
        Role para baixo ‚¨áÔ∏è
      </section>

      <!-- üî∏ Se√ß√£o animada -->
      <section id="slide" class="relative h-screen flex items-center justify-center bg-gray-800 overflow-hidden perspective-[1000px]">
        <div id="box" class="w-40 h-40 bg-green-500 rounded-2xl shadow-2xl"></div>
      </section>

      <!-- Se√ß√£o final -->
      <section class="h-screen flex items-center justify-center text-3xl bg-gray-900">
        Fim üé¨
      </section>

    </div>
  </div>

  <script>
    gsap.registerPlugin(ScrollTrigger, ScrollSmoother);

    // üîπ Ativa o ScrollSmoother
    const smoother = ScrollSmoother.create({
      wrapper: "#smooth-wrapper",
      content: "#smooth-content",
      smooth: 1.5, // suavidade da rolagem
      effects: true,
    });

    // üî∏ Cria uma anima√ß√£o 3D com ScrollTrigger
    const tl = gsap.timeline({
      scrollTrigger: {
        trigger: "#slide",       // se√ß√£o alvo
        start: "top center",     // quando o topo da se√ß√£o chega ao centro da tela
        end: "bottom center",    // at√© o fim da se√ß√£o
        scrub: true,             // anima conforme o scroll (scrub suave)
      }
    });

    // üîπ Aplica uma transforma√ß√£o 3D progressiva conforme o scroll
    tl.fromTo("#box",
      { xPercent: -50, yPercent: -50, z: -300, opacity: 0.3 },
      { xPercent: -50, yPercent: -50, z: 200, opacity: 1, ease: "power2.inOut" }
    );

    // üî∏ Movimento do mouse (parallax leve)
    const box = document.querySelector("#box");
    const slide = document.querySelector("#slide");

    slide.addEventListener("mousemove", (e) => {
      const { width, height, left, top } = slide.getBoundingClientRect();
      const x = e.clientX - left - width / 2;
      const y = e.clientY - top - height / 2;

      // movimento suave do mouse afetando o translate3d
      gsap.to(box, {
        x: x * 0.1, // reduz intensidade
        y: y * 0.1,
        duration: 0.4,
        ease: "power2.out",
      });
    });
  </script>
</body>
</html>
